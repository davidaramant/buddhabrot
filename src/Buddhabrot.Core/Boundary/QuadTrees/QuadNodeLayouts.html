<!DOCTYPE html>
<html lang="en-us">

<head>
    <meta charset="utf-8" />
    <title>Region Lookup Quadtree Nodes</title>
    <style>
        table,
        th,
        td {
            border: 1px solid black;
            border-collapse: collapse;
            padding: 6px;
        }

        th {
            width: 24px
        }

        body {
            background-color: white;
            color: black;
        }

        .unused {
            background-color: lightgray
        }
    </style>
</head>

<body>
    <h1>Definitions</h1>
    <h2>Region Types</h2>
    <table>
        <tr>
            <th>Value</th>
            <th>Description</th>
        </tr>
        <tr>
            <td>0</td>
            <td>Unknown</td>
        </tr>
        <tr>
            <td>1</td>
            <td>Border</td>
        </tr>
        <tr>
            <td>2</td>
            <td>Filament</td>
        </tr>
        <tr>
            <td>3</td>
            <td>Rejected</td>
        </tr>
    </table>
    <h2>Terms</h2>
    <table>
        <tr>
            <td>UL</td>
            <td>UR</td>
        </tr>
        <tr>
            <td>LL</td>
            <td>LR</td>
        </tr>
    </table>

    <h1>Notes</h1>
    <p>VisitedRegions and RegionLookup use the same node format, but have some differences:</p>
    <ul>
        <li>VisitedRegions does not fill out the region type of Leaf Quad nodes. This would need to be updated
            as the tree is mutated.</li>
        <li>RegionLookup does not use the Rejected region type. This is replaced with Unknown when the tree is built
            from VisitedRegions. This node type isn't visually interesting and just causes the quad tree to bloat in
            size.</li>
        <li>RegionLookup is normalized (subtrees can be referenced mulitple times). It is not intended to be modified.
        </li>
        <li>VisitedRegions uses LongBranch nodes instead of Branch. This tree is substantially larger than RegionLookup
            becuase of the lack of normalization and it needs the extra bits for the child index.</li>
    </ul>

    <h1>Node Types</h1>
    <h2>Leaf</h2>
    <table>
        <tr>
            <th>31</th>
            <th>30</th>
            <th>29</th>
            <th>28</th>
            <th>27</th>
            <th>26</th>
            <th>25</th>
            <th>24</th>
            <th>23</th>
            <th>22</th>
            <th>21</th>
            <th>20</th>
            <th>19</th>
            <th>18</th>
            <th>17</th>
            <th>16</th>
            <th>15</th>
            <th>14</th>
            <th>13</th>
            <th>12</th>
            <th>11</th>
            <th>10</th>
            <th>9</th>
            <th>8</th>
            <th>7</th>
            <th>6</th>
            <th>5</th>
            <th>4</th>
            <th>3</th>
            <th>2</th>
            <th>1</th>
            <th>0</th>
        </tr>
        <tr>
            <td colspan="28" class="unused">Unused</td>
            <td colspan="2">Region Type</td>
            <td colspan="2">Node Type = 0</td>
        </tr>
    </table>
    <h2>Branch</h2>
    <table>
        <tr>
            <th>31</th>
            <th>30</th>
            <th>29</th>
            <th>28</th>
            <th>27</th>
            <th>26</th>
            <th>25</th>
            <th>24</th>
            <th>23</th>
            <th>22</th>
            <th>21</th>
            <th>20</th>
            <th>19</th>
            <th>18</th>
            <th>17</th>
            <th>16</th>
            <th>15</th>
            <th>14</th>
            <th>13</th>
            <th>12</th>
            <th>11</th>
            <th>10</th>
            <th>9</th>
            <th>8</th>
            <th>7</th>
            <th>6</th>
            <th>5</th>
            <th>4</th>
            <th>3</th>
            <th>2</th>
            <th>1</th>
            <th>0</th>
        </tr>
        <tr>
            <td colspan="28">Index to children</td>
            <td colspan="2">Region Type</td>
            <td colspan="2">Node Type = 1</td>
        </tr>
    </table>
    <h2>Leaf Quad</h2>
    <table>
        <tr>
            <th>31</th>
            <th>30</th>
            <th>29</th>
            <th>28</th>
            <th>27</th>
            <th>26</th>
            <th>25</th>
            <th>24</th>
            <th>23</th>
            <th>22</th>
            <th>21</th>
            <th>20</th>
            <th>19</th>
            <th>18</th>
            <th>17</th>
            <th>16</th>
            <th>15</th>
            <th>14</th>
            <th>13</th>
            <th>12</th>
            <th>11</th>
            <th>10</th>
            <th>9</th>
            <th>8</th>
            <th>7</th>
            <th>6</th>
            <th>5</th>
            <th>4</th>
            <th>3</th>
            <th>2</th>
            <th>1</th>
            <th>0</th>
        </tr>
        <tr>
            <td colspan="20" class="unused">Unused</td>
            <td colspan="2">LL</td>
            <td colspan="2">LR</td>
            <td colspan="2">UL</td>
            <td colspan="2">UR</td>
            <td colspan="2">Region Type</td>
            <td colspan="2">Node Type = 2</td>
        </tr>
    </table>
    <h2>Long Branch</h2>
    <table>
        <tr>
            <th>31</th>
            <th>30</th>
            <th>29</th>
            <th>28</th>
            <th>27</th>
            <th>26</th>
            <th>25</th>
            <th>24</th>
            <th>23</th>
            <th>22</th>
            <th>21</th>
            <th>20</th>
            <th>19</th>
            <th>18</th>
            <th>17</th>
            <th>16</th>
            <th>15</th>
            <th>14</th>
            <th>13</th>
            <th>12</th>
            <th>11</th>
            <th>10</th>
            <th>9</th>
            <th>8</th>
            <th>7</th>
            <th>6</th>
            <th>5</th>
            <th>4</th>
            <th>3</th>
            <th>2</th>
            <th>1</th>
            <th>0</th>
        </tr>
        <tr>
            <td colspan="30">Index to children</td>
            <td colspan="2">Node Type = 3</td>
        </tr>
    </table>

</body>

</html>